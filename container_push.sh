!/bin/sh

# Create ECR (if not already existing)
aws ecr create-repository --repository-name "recyclemate"

ACCOUNT_ID=AIDA3WLXNLSJ3572OXSBN|  jq -r '.Account' eyJwYXlsb2FkIjoieG1IZjQwMnJrd1YwR21DaU9ycUNCYXpEN3BzSHM4cUZRQjkzUm4raXpiMTBZbHVTM29leGJKU3hIVkk1MkNLekhvdTBTN29jZTNHOTdpdTlMRzBuaEJEeTZDNGs5cVBnbzBScU5reStMaGhKL2ZRNHBWSktRMmdtK0o4aC9acFNmQ2x1bkR6M0pZVXlKcnlhdFpXSGt4Tyt3ODlEMmNiY2hGSExoWnEwakp5emVZOUY0amNhTndCQWg4Z0pTZXVEMFJ5UkN0akdMdVpic0JYU1hIWjNEaDVqUFp4dUtBL2F5cVF4eUR4U1BtaElxS3Z0YzE4Q0lyM0RRTG1VMEtJUS9iS2xLWUtJNE9rb0REZjd1cXgvR09uSDdEUzUvMnRiN1hYOSs0d0hHTGpRTEdTTW4zKzZZYndwMTBiZlV2V3dJcktUcjJGTXd0QkhISE9wTzVhVWpoVWZpNlFsUW9pdjhJd0FNVEV0T3R4Y0cwd2dTSVVJLzFyQWJDUzlZV25aRFl5ajY1RUZWbEVIZXZiOTJDZElpTVB4dDcwVEwrc2o5cVBLTWdGMlVEUUU1REg0OTkxNWFkdVhCRVU4K0twSXFKVDVNS2NKdWRqMUp0cHRnclFPMWFhU3dPYk9aZFJHZGd2blhURXVVMzNSL0pVVy92WHFiU1NxSkF6cDNIM0FjWUJ6eFpZQ2VVbStkZlBDSGJPQVltdjFaVDN0UWxsdjFjdEFueUNObUhXRTlWNFdrajVvRHJqQ2VPaEtjS1YvY2pwVFlKTkt4MHVVVGxldElETmFxanh3VFdpYkdTQzMydWpZL2lzRjBtdGZuMDAwM0lUWllncXBaaFY4Mk95YjAwaEpFY0NhcDdaQVZYaXFLOW8rUGhGd0JObGtaazZWY1Vwb1dWMWJyRTdPUWdCMWcydGhSb29ZWjRQR3A1MDIzZlA2UjBQYUZoRkg1MzlPK0ZkNkMzc3dDR2JxN2c4RXl0Z3hzbUkyZEJ3OENKRkNUbUgwNVZNUy91VkFVa2tKTkxIN05wMFRraHRjOWgzeE8rczBTVS9RQzNCWUJEK2JPRWszQ1R4dVJWOUxaTExmWFdSSm5lRGc4dGJoSGhZYzErcllDMC9PdlFUMFNQSHlKRXJ4QVhrRVpET2dyV01OWUVGaWtnQzFzTi9IWlJOSDg4cVRFZGhkcFc5S2dtU2hiUHBCejhqaDJzV2U2SlA5S1FpZEhHQk45cTRIdkdYbWhxWUpINytWVHBjaW1rNnVEWW03MFJOdG5mVEFkNGRETVRHUnlsR3JlZVZTY3pWWFNRWC9Zam5jQXNGemd6U2QwUjNnZXVhd0NJdmdQSm1HT21BbDlXL3FTL3pwS3FRU3EweVZGQWIyZ3EzQ1pDNDJOay9pSmhrdzdwa2ZIMHpKcG5wOExPVDBVQWxvUUI0eHNnL3EvTkhnamw2NG9PaEFsV1g0V1NuZjVjOU5rdGJqeVVidEN5R1k4cnQyenBxbFpQN0FXdkFMOHgxWk5CK3J6bUpqNTg2c2ZDY1B4SGlnWnFNbTJiSG44RFhwVVlCZnVCVlQzTVZXcmtxS2ZDbWFiU0lXOFlFYk0yMkl5emxNcFNtRUNweklONXl1TjFnPSIsImRhdGFrZXkiOiJBUUVCQUhoTHlqejdQSkVQbVlicUg2QTZmL3dXTnp5ejVCS2EzN0JuQlBzQXl1RjFLUUFBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVESSsxRlV4UDFjSjdMeHg4WFFJQkVJQTdmcUlQTTVkV2Y0MDdNQU5XZUFrYlYvNXFnSjNNUjhwclRvaGphVEZTVVN3OHZ4c3V0Z2R4N2t2WDljUVFSMzFENUtsaEVnVklhc0Vwek9zPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTU5ODI0NTI4NH0=

docker build -t recyclemate ./messenger-bot/
docker tag recyclemate:latest 803946192019.dkr.ecr.ap-southeast-2.amazonaws.com/recyclemate:latest
docker push 803946192019.dkr.ecr.ap-southeast-2.amazonaws.com/recyclemate:latest
